#데이터베이스



##설계

###정규화
관계형 데이터베이스에서 중복을 최소화하기 위한 작업
프로그램 처리속도의 개선이 목표
데이터의 수정 시 반복된 작업을 개선하기 위해 필수적이다

####제1정규화법칙
하나의 칼럼에 나누어지는 값을 넣어서는 안된다.
예를 들어 옷이라는 데이터베이스  모델에 색상이라는 값이 있다고 하면 같은 옷 종류에 색상이 여러가지라고 해서 한 칼럼에 색상 여러가지를 입력하면 안된다.

####제2정규화법칙
부분함수종속이 있어서는 안된다.
학생을 나타내는 릴레이션이  있다고 가정하자.
이 릴레이션에는 <학번, 학과이름. 과목번호, 학점>이라는 어트리뷰트가 있고 학과 이름과 학과 이름은 학번에 종속하고 학점은 학번과 과목번호에 종속한다.
여기서 기본 키는 학번과 과목번호인데 학과이름이 학번에 부분종속한다.
따라서 2정규화법칙을 만족하기 위해서는 이 부분종속을 제거해야 한다.
이걸 만족하기 위해서는 학번과 학과이름이 속해있는 릴레이션과 학번,과목번호,학점으로 이루어진 릴레이션으로 분리해야한다.

####제3정규화법칙
이행적 종속관계를 제거해야 한다
기본 키에 의존하지 않고 일반칼럼에 의존하는 경우를 제거해야 한다.
예를 들면
A -> B, B->C 이면 A -> C가 되므로 이 관계를 제거해야 한다.
데이터베이스설계는 보통 제3정규화법칙까지는 기본적으로 만족해야 한다.

####BCNF
BCNF를 만족하는 릴레이션 스키마들의 집합에서는 갱신 이상이 발생하지 않으므로 실제적인 정규화의 목표이다.
제3정규화법칙까지 만족해도 갱신이상이 존재할 수 있는데 예를 들어 수강이라는 릴레이션에 <학번, 과목, 강사>라는 어트리뷰트가 존재한다고 하자.
1명의 강사는 1개의 과목만 가르친다고 가정하자.
학번과 과목을 알면 해당 학생이 듣는 과목의 강사를 알 수 있으므로 강사는 <학번,과목>에 종속하고 강사를 알면 해당 강사가 강의하는 과목을 알 수 있으므로 과목은 강사에 종속한다.
이 경우에 이행적 종속이 존재하지 않고 기본키가 <학번, 과목>이므로 부분종속도 존재하지 않으므로 제3정규화법칙을 만족한다.
하지만 어떤 과목을 만들었는데 아직 수강하는 학생이 없으면 과목에 대한 정보도 입력할 수 없고 어떤 과목을 배우는 학생이 1명인데 그 학생이 그 과목을 듣지 않게 되어 그 학생을 없앤다면 해당 과목에 대한 정보도 없어지므로 갱신이상이 존재한다.
이런 갱신이상을 해결하기 위해 릴레이션을 <학번, 강사> <과목, 강사>로 나누어서 릴레이션을 만들면 해당 갱신이상이 해결되므로 BCNF를 만족한다.
결론적으로 키가 아닌 어트리뷰트가 키 어트리뷰트의 결정자인 경우가 존재해서는 안된다.


일반적으로 데이터베이스를 설계할때 성능보다는 유지,보수 관리측면에서 먼저 신경쓰는것 같다
데이터베이스는 많이 빠르므로 데이터베이스에 대한 접근이나 리턴에 대한 속도는 거의 없다고 생각하고 나중에 유지,보수 측면에서 쉽게 수정하고 제거할 수 있도록 설계하는것을 먼저 생각해야 하는 것 같다.


###종속성

####완전 함수적 종속성
릴레이션에 기본키가 a,b 2개의 어트리뷰트가 있다고 하고, c라는 어트리뷰트가 (a, b)에 종속한다면 이를 완전 함수적 종속성이라고 한다
c는 a,b 두 어트리뷰트가 모두 주어져야 종속을 하고 둘 중 하나의 어트리뷰트에는 종속하지 않는다

####부분 함수적 종속성
위에 설명한 릴레이션에 d라는 어트리뷰트는 a라는 어트리뷰트에 종속하고 e라는 어트리뷰트는 b라는 어트리뷰트에 종속한다고 하자.
결정자가 a,b 두 개인데 d와 e는 하나의 어트리뷰트에 종속하고 나머지 어트리뷰트에는 영향을 받지 않으므로 d와 e는 부분 함수적 종속성을 가지고 있다고 볼 수 있다

####이행적 함수적 종속성
한 릴레이션의 어트리뷰트 A,B,C가 주어졌을 때 B가 A에 종속하고 C가 B에 종속하면 C는 A에 종속한다고 볼 수 있다.
이런 관계에서 C는 A에 종속하기도 하지만 C는 B를 거쳐 A에 종속하므로 C는 B에 종속한다고도 할 수 있다.
이 때 C는 이행적으로 종속한다.
이행적 종속성이 존재하는 릴레이션에는 키가 아닌 어트리뷰트가 적어도 두 개 이상 있어야 한다.

